# Sistema de Gest√£o de Metas - Documenta√ß√£o Completa\n\n## üìã Vis√£o Geral\n\nO **Sistema de Gest√£o de Metas** √© uma plataforma web totalmente online para gerenciar metas organizacionais, permitindo cadastro de estrutura organizacional, gest√£o de metas, apontamento de resultados, fluxo de valida√ß√£o e gera√ß√£o de relat√≥rios consolidados.\n\n### ‚ú® Caracter√≠sticas Principais\n\n- **Estrutura Organizacional**: Cadastro de setores com respons√°veis (cadastrador, aprovador, acompanhador)\n- **Gest√£o de Metas**: Suporte para 3 tipos (percentual, inteiro, data) com controle de pesos\n- **Apontamento de Resultados**: Interface para colaboradores com upload de evid√™ncias\n- **Fluxo de Valida√ß√£o**: Aprova√ß√£o/reprova√ß√£o com coment√°rios e rastreabilidade\n- **Dashboards e Relat√≥rios**: Consolida√ß√£o por setor e per√≠odo com status de resultados\n- **Seguran√ßa**: Autentica√ß√£o integrada, controle de acesso por roles\n- **Deploy Cont√≠nuo**: GitHub Actions ‚Üí Vercel autom√°tico\n\n## üöÄ Quick Start\n\n### Pr√©-requisitos\n\n- Node.js 18+ e pnpm instalados\n- Banco de dados MySQL/MariaDB (ou PlanetScale)\n- Conta GitHub\n- Conta Vercel\n\n### Instala√ß√£o Local\n\n```bash\n# 1. Clonar reposit√≥rio\ngit clone https://github.com/seu-usuario/metas-management-system.git\ncd metas-management-system\n\n# 2. Instalar depend√™ncias\npnpm install\n\n# 3. Configurar vari√°veis de ambiente\ncp .env.example .env.local\n# Editar .env.local com suas credenciais\n\n# 4. Executar migra√ß√µes\npnpm db:push\n\n# 5. Iniciar servidor de desenvolvimento\npnpm dev\n```\n\nAcesse `http://localhost:3000` no navegador.\n\n## üìÅ Estrutura do Projeto\n\n```\nmetas-management-system/\n‚îú‚îÄ‚îÄ client/                 # Frontend (React + Vite + Tailwind)\n‚îÇ   ‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/         # P√°ginas da aplica√ß√£o\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/    # Componentes reutiliz√°veis\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/      # React contexts\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/         # Custom hooks\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/           # Utilit√°rios\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.tsx        # Roteamento principal\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.tsx       # Entry point\n‚îÇ   ‚îî‚îÄ‚îÄ public/            # Arquivos est√°ticos\n‚îú‚îÄ‚îÄ server/                # Backend (Express + tRPC)\n‚îÇ   ‚îú‚îÄ‚îÄ routers.ts         # Procedimentos tRPC\n‚îÇ   ‚îú‚îÄ‚îÄ db.ts              # Query helpers\n‚îÇ   ‚îî‚îÄ‚îÄ _core/             # Framework core (n√£o editar)\n‚îú‚îÄ‚îÄ drizzle/               # Database schema e migrations\n‚îÇ   ‚îî‚îÄ‚îÄ schema.ts          # Defini√ß√£o de tabelas\n‚îú‚îÄ‚îÄ storage/               # S3 helpers\n‚îú‚îÄ‚îÄ shared/                # C√≥digo compartilhado\n‚îú‚îÄ‚îÄ .github/workflows/     # GitHub Actions\n‚îú‚îÄ‚îÄ FIREBASE_SETUP.md      # Configura√ß√£o Firebase\n‚îú‚îÄ‚îÄ GITHUB_SETUP.md        # Configura√ß√£o GitHub\n‚îú‚îÄ‚îÄ DEPLOYMENT.md          # Guia de deployment\n‚îî‚îÄ‚îÄ package.json           # Depend√™ncias\n```\n\n## üóÑÔ∏è Banco de Dados\n\n### Tabelas Principais\n\n| Tabela | Descri√ß√£o |\n|--------|----------|\n| `users` | Usu√°rios do sistema |\n| `sectors` | Setores/departamentos |\n| `sectorResponsibles` | Respons√°veis por setor |\n| `goals` | Metas com tipos (%, inteiro, data) |\n| `results` | Resultados apontados |\n| `approvals` | Aprova√ß√µes com coment√°rios |\n| `auditLog` | Rastreamento de a√ß√µes |\n\n### Executar Migra√ß√µes\n\n```bash\n# Gerar e aplicar migra√ß√µes\npnpm db:push\n\n# Apenas gerar (sem aplicar)\ndrizzle-kit generate\n\n# Apenas aplicar\ndrizzle-kit migrate\n```\n\n## üîê Autentica√ß√£o\n\nO sistema usa **Manus OAuth** para autentica√ß√£o. Roles dispon√≠veis:\n\n- **admin**: Acesso total, pode aprovar/rejeitar resultados\n- **user**: Colaborador, pode apontar resultados\n\n### Fluxo de Autentica√ß√£o\n\n1. Usu√°rio clica em \"Login\"\n2. Redireciona para Manus OAuth\n3. Ap√≥s autentica√ß√£o, retorna com token\n4. Sistema cria/atualiza usu√°rio no banco\n5. Sess√£o mantida via cookie\n\n## üõ†Ô∏è Desenvolvimento\n\n### Adicionar Nova Feature\n\n1. **Criar tabela no schema** (`drizzle/schema.ts`):\n   ```ts\n   export const myTable = mysqlTable(\"myTable\", {\n     id: int(\"id\").autoincrement().primaryKey(),\n     name: varchar(\"name\", { length: 255 }).notNull(),\n   });\n   ```\n\n2. **Adicionar query helper** (`server/db.ts`):\n   ```ts\n   export async function getMyData() {\n     const db = await getDb();\n     return db.select().from(myTable);\n   }\n   ```\n\n3. **Criar procedimento tRPC** (`server/routers.ts`):\n   ```ts\n   myFeature: router({\n     list: protectedProcedure.query(({ ctx }) => \n       getMyData()\n     ),\n   }),\n   ```\n\n4. **Usar no frontend** (`client/src/pages/MyPage.tsx`):\n   ```tsx\n   const { data } = trpc.myFeature.list.useQuery();\n   ```\n\n5. **Testar** (`server/my-feature.test.ts`):\n   ```ts\n   describe(\"myFeature\", () => {\n     it(\"should list data\", async () => {\n       // Test implementation\n     });\n   });\n   ```\n\n6. **Executar migra√ß√µes**:\n   ```bash\n   pnpm db:push\n   ```\n\n### Executar Testes\n\n```bash\n# Rodar todos os testes\npnpm test\n\n# Modo watch\npnpm test -- --watch\n\n# Cobertura\npnpm test -- --coverage\n```\n\n### Linting e Formatting\n\n```bash\n# Verificar formata√ß√£o\npnpm format --check\n\n# Aplicar formata√ß√£o\npnpm format\n\n# Type checking\npnpm check\n```\n\n## üì¶ Build e Deploy\n\n### Build Local\n\n```bash\n# Build para produ√ß√£o\npnpm build\n\n# Testar build localmente\npnpm start\n```\n\n### Deploy na Vercel\n\nVeja `DEPLOYMENT.md` para instru√ß√µes detalhadas.\n\n```bash\n# Deploy via CLI\nvercel\n\n# Deploy de staging\nvercel --prod\n```\n\n## üîß Configura√ß√£o\n\n### Vari√°veis de Ambiente\n\nVeja `.env.example` para lista completa. Principais:\n\n```env\nDATABASE_URL=mysql://user:pass@host/db\nJWT_SECRET=sua-chave-secreta\nVITE_APP_ID=seu-app-id\nVITE_OAUTH_PORTAL_URL=https://oauth.manus.im\n```\n\n### Firebase (Opcional)\n\nSe usar Firebase, configure em `FIREBASE_SETUP.md`.\n\n## üìä Arquitetura\n\n### Stack Tecnol√≥gico\n\n- **Frontend**: React 19 + Vite + Tailwind CSS 4\n- **Backend**: Express 4 + tRPC 11\n- **Database**: MySQL/MariaDB com Drizzle ORM\n- **Auth**: Manus OAuth\n- **Storage**: S3 (via Manus)\n- **Deploy**: Vercel\n- **CI/CD**: GitHub Actions\n\n### Fluxo de Dados\n\n```\nUI (React) ‚Üí tRPC Client ‚Üí tRPC Server ‚Üí Database\n     ‚Üë                           ‚Üì\n     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Session Cookie ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## üêõ Troubleshooting\n\n### Erro: \"Database connection refused\"\n\n```bash\n# Verificar DATABASE_URL\necho $DATABASE_URL\n\n# Testar conex√£o\nmysql -u user -p -h host -D database\n```\n\n### Erro: \"Module not found\"\n\n```bash\n# Reinstalar depend√™ncias\nrm -rf node_modules pnpm-lock.yaml\npnpm install\n```\n\n### Erro: \"Build failed\"\n\n```bash\n# Verificar localmente\npnpm build\n\n# Ver logs de erro\npnpm build 2>&1 | head -50\n```\n\n## üìö Documenta√ß√£o Adicional\n\n- **[FIREBASE_SETUP.md](./FIREBASE_SETUP.md)** - Configura√ß√£o do Firebase\n- **[GITHUB_SETUP.md](./GITHUB_SETUP.md)** - Configura√ß√£o do GitHub e CI/CD\n- **[DEPLOYMENT.md](./DEPLOYMENT.md)** - Guia de deployment na Vercel\n- **[tRPC Docs](https://trpc.io/docs)** - Documenta√ß√£o tRPC\n- **[Drizzle Docs](https://orm.drizzle.team/docs)** - Documenta√ß√£o Drizzle ORM\n- **[Tailwind Docs](https://tailwindcss.com/docs)** - Documenta√ß√£o Tailwind CSS\n\n## ü§ù Contribuindo\n\n1. Crie uma branch para sua feature: `git checkout -b feature/minha-feature`\n2. Commit suas mudan√ßas: `git commit -m \"Adicionar minha feature\"`\n3. Push para a branch: `git push origin feature/minha-feature`\n4. Abra um Pull Request\n\n## üìù Licen√ßa\n\nMIT License - veja LICENSE.md para detalhes.\n\n## üìû Suporte\n\nPara d√∫vidas ou problemas:\n\n1. Verifique a documenta√ß√£o em `FIREBASE_SETUP.md`, `GITHUB_SETUP.md` e `DEPLOYMENT.md`\n2. Consulte os logs: `vercel logs`\n3. Abra uma issue no GitHub\n\n## üéØ Roadmap\n\n- [ ] Integra√ß√£o com Google Drive para evid√™ncias\n- [ ] Notifica√ß√µes por email\n- [ ] Exporta√ß√£o de relat√≥rios em PDF\n- [ ] Integra√ß√£o com calend√°rio\n- [ ] Mobile app\n- [ ] An√°lise de tend√™ncias\n\n---\n\n**Desenvolvido com ‚ù§Ô∏è para gest√£o eficiente de metas organizacionais**\n
